{"ast":null,"code":"import React,{useEffect,useState,useRef}from\"react\";import axios from\"axios\";import MovieRecommendation from\"../components/MovieRecommendation\";import TrailerModal from'../components/TrailerModal';import Footer from'../components/Footer';import\"../styles/Home.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const categories=[{title:\"Trending\",query:\"trending\"},{title:\"Marvel\",query:\"marvel\"},{title:\"Harry Potter\",query:\"harry potter\"},{title:\"Star Wars\",query:\"star wars\"},{title:\"Top Rated\",query:\"top rated\"}];const Home=()=>{const[movieData,setMovieData]=useState({});const[recommendations,setRecommendations]=useState([]);const[currentRecIndex,setCurrentRecIndex]=useState(0);const[setIsTrailerOpen]=useState(false);const[trailerUrl,setTrailerUrl]=useState(\"\");const rowRefs=useRef({});useEffect(()=>{const fetchData=async()=>{const newData={};try{const trendingRes=await axios.get(\"https://search.imdbot.workers.dev/?q=trending\");setRecommendations(trendingRes.data.description.slice(0,5));// top 5 recs\n}catch(err){console.error(\"Error fetching trending recommendations\",err);}for(const category of categories){try{const res=await axios.get(`https://search.imdbot.workers.dev/?q=${category.query}`);newData[category.title]=res.data.description||[];}catch(err){console.error(`Error fetching ${category.title}`,err);newData[category.title]=[];}}setMovieData(newData);};fetchData();},[]);useEffect(()=>{if(recommendations.length===0)return;const interval=setInterval(()=>{setCurrentRecIndex(prev=>(prev+1)%recommendations.length);},10000);// every 10 seconds\nreturn()=>clearInterval(interval);},[recommendations]);const openTrailer=movie=>{// If you have a trailer URL, use it; else fallback to RickRoll :)\nconst url=movie.trailerUrl||`https://www.youtube.com/embed/dQw4w9WgXcQ`;setTrailerUrl(url);setIsTrailerOpen(true);};const closeTrailer=()=>{setIsTrailerOpen(false);setTrailerUrl(\"\");};const scrollLeft=category=>{const container=rowRefs.current[category];if(container){container.scrollBy({left:-300,behavior:\"smooth\"});}};const scrollRight=category=>{const container=rowRefs.current[category];if(container){container.scrollBy({left:300,behavior:\"smooth\"});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"home-container\",children:[/*#__PURE__*/_jsx(MovieRecommendation,{recommendations:recommendations,currentIndex:currentRecIndex,openTrailer:openTrailer}),Object.keys(movieData).map(category=>/*#__PURE__*/_jsxs(\"div\",{className:\"category-row\",children:[/*#__PURE__*/_jsx(\"h2\",{children:category}),/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-container\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"carousel-btn left\",onClick:()=>scrollLeft(category),children:\"\\u276E\"}),/*#__PURE__*/_jsx(\"div\",{className:\"movie-row\",ref:el=>rowRefs.current[category]=el,children:movieData[category].map((movie,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"movie-card\",onClick:()=>openTrailer(movie),style:{cursor:\"pointer\"},children:[/*#__PURE__*/_jsx(\"img\",{src:movie[\"#IMG_POSTER\"]||\"https://via.placeholder.com/160x240\",alt:movie[\"#TITLE\"],className:\"movie-image\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"movie-info\",children:[/*#__PURE__*/_jsx(\"p\",{children:movie[\"#TITLE\"]}),/*#__PURE__*/_jsx(\"p\",{children:movie[\"#YEAR\"]})]})]},index))}),/*#__PURE__*/_jsx(\"button\",{className:\"carousel-btn right\",onClick:()=>scrollRight(category),children:\"\\u276F\"})]})]},category)),/*#__PURE__*/_jsx(TrailerModal,{url:trailerUrl,onClose:closeTrailer}),/*#__PURE__*/_jsx(Footer,{})]});};export default Home;","map":{"version":3,"names":["React","useEffect","useState","useRef","axios","MovieRecommendation","TrailerModal","Footer","jsx","_jsx","jsxs","_jsxs","categories","title","query","Home","movieData","setMovieData","recommendations","setRecommendations","currentRecIndex","setCurrentRecIndex","setIsTrailerOpen","trailerUrl","setTrailerUrl","rowRefs","fetchData","newData","trendingRes","get","data","description","slice","err","console","error","category","res","length","interval","setInterval","prev","clearInterval","openTrailer","movie","url","closeTrailer","scrollLeft","container","current","scrollBy","left","behavior","scrollRight","className","children","currentIndex","Object","keys","map","onClick","ref","el","index","style","cursor","src","alt","onClose"],"sources":["/home/zoe/Desktop/netflix/src/pages/Home.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport axios from \"axios\";\nimport MovieRecommendation from \"../components/MovieRecommendation\";\nimport TrailerModal from '../components/TrailerModal';\nimport Footer from '../components/Footer';\nimport \"../styles/Home.css\";\n\nconst categories = [\n  { title: \"Trending\", query: \"trending\" },\n  { title: \"Marvel\", query: \"marvel\" },\n  { title: \"Harry Potter\", query: \"harry potter\" },\n  { title: \"Star Wars\", query: \"star wars\" },\n  { title: \"Top Rated\", query: \"top rated\" },\n];\n\nconst Home = () => {\n  const [movieData, setMovieData] = useState({});\n  const [recommendations, setRecommendations] = useState([]);\n  const [currentRecIndex, setCurrentRecIndex] = useState(0);\n\n  const [ setIsTrailerOpen] = useState(false);\n  const [trailerUrl, setTrailerUrl] = useState(\"\");\n\n  const rowRefs = useRef({});\n\n  useEffect(() => {\n    const fetchData = async () => {\n      const newData = {};\n      try {\n        const trendingRes = await axios.get(\n          \"https://search.imdbot.workers.dev/?q=trending\"\n        );\n        setRecommendations(trendingRes.data.description.slice(0, 5)); // top 5 recs\n      } catch (err) {\n        console.error(\"Error fetching trending recommendations\", err);\n      }\n\n      for (const category of categories) {\n        try {\n          const res = await axios.get(\n            `https://search.imdbot.workers.dev/?q=${category.query}`\n          );\n          newData[category.title] = res.data.description || [];\n        } catch (err) {\n          console.error(`Error fetching ${category.title}`, err);\n          newData[category.title] = [];\n        }\n      }\n      setMovieData(newData);\n    };\n\n    fetchData();\n  }, []);\n\n  useEffect(() => {\n    if (recommendations.length === 0) return;\n\n    const interval = setInterval(() => {\n      setCurrentRecIndex((prev) => (prev + 1) % recommendations.length);\n    }, 10000); // every 10 seconds\n\n    return () => clearInterval(interval);\n  }, [recommendations]);\n\n  const openTrailer = (movie) => {\n    // If you have a trailer URL, use it; else fallback to RickRoll :)\n    const url = movie.trailerUrl || `https://www.youtube.com/embed/dQw4w9WgXcQ`;\n    setTrailerUrl(url);\n    setIsTrailerOpen(true);\n  };\n\n  const closeTrailer = () => {\n    setIsTrailerOpen(false);\n    setTrailerUrl(\"\");\n  };\n\n  const scrollLeft = (category) => {\n    const container = rowRefs.current[category];\n    if (container) {\n      container.scrollBy({ left: -300, behavior: \"smooth\" });\n    }\n  };\n\n  const scrollRight = (category) => {\n    const container = rowRefs.current[category];\n    if (container) {\n      container.scrollBy({ left: 300, behavior: \"smooth\" });\n    }\n  };\n\n  return (\n    <div className=\"home-container\">\n      <MovieRecommendation\n        recommendations={recommendations}\n        currentIndex={currentRecIndex}\n        openTrailer={openTrailer}\n      />\n\n      {Object.keys(movieData).map((category) => (\n        <div key={category} className=\"category-row\">\n          <h2>{category}</h2>\n          <div className=\"carousel-container\">\n            <button className=\"carousel-btn left\" onClick={() => scrollLeft(category)}>\n              &#10094;\n            </button>\n\n            <div\n              className=\"movie-row\"\n              ref={(el) => (rowRefs.current[category] = el)}\n            >\n              {movieData[category].map((movie, index) => (\n                <div\n                  key={index}\n                  className=\"movie-card\"\n                  onClick={() => openTrailer(movie)}\n                  style={{ cursor: \"pointer\" }}\n                >\n                  <img\n                    src={movie[\"#IMG_POSTER\"] || \"https://via.placeholder.com/160x240\"}\n                    alt={movie[\"#TITLE\"]}\n                    className=\"movie-image\"\n                  />\n                  <div className=\"movie-info\">\n                    <p>{movie[\"#TITLE\"]}</p>\n                    <p>{movie[\"#YEAR\"]}</p>\n                  </div>\n                </div>\n              ))}\n            </div>\n\n            <button className=\"carousel-btn right\" onClick={() => scrollRight(category)}>\n              &#10095;\n            </button>\n          </div>\n        </div>\n      ))}\n\n      <TrailerModal url={trailerUrl} onClose={closeTrailer} />\n      <Footer />\n    </div>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}